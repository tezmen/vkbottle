# Middleware

Мидлварь должен имплементировать методы `pre` и/или `post`. `pre` вызывается до поиска хендлеров, а `post` после.

Мидлвари всегда распаковываются из `labeler`

Абстрактный класс для мидлварей - `BaseMiddleware` 

Стандартные view: 

Конструктор принимает ивент в качестве аргумента

`pre`/`post` должны возвращать `None`:

* `self.stop(ошибка)` исполнение view срочно останавливается
* `self.send({ключ: значние})` в контекст добавляются аргемументы (ключ - имя аргумента)

Принимает `pre` не приминает аргументов, но имеет доступ к ивенту через `self`

`post`, помимо `self`, принимает следующие аргументы:

* `view: ABCView` (с которым был обработан ивент)
* `handle_responses: list` (все то что вернули хендлеры по порядку их исполнения)
* `handlers: List[ABCHandler]` (все хендлеры что были исполнены)

[Примеры смотреть здесь](https://github.com/timoniq/vkbottle/blob/master/examples/high-level/middleware_example.py)
